---
phase: 02-architecture
plan: 04
type: execute
wave: 1
depends_on: []
files_modified: ["src/components/CeilingPanel.tsx", "src/components/LightingCutout.tsx", "src/components/ExtrusionTool.tsx"]
autonomous: true

must_haves:
  truths:
    - "Ceiling panel components render with proper dimensions in 3D space"
    - "Lighting cutout geometry subtracts from panels accurately"
    - "Push-pull extrusion creates 3D volumes from 2D shapes"
  artifacts:
    - path: "src/components/CeilingPanel.tsx"
      provides: "Reusable ceiling panel mesh with materials and dimensions"
      min_lines: 40
    - path: "src/components/LightingCutout.tsx"
      provides: "Lighting fixture cutout geometry for ceiling voids"
      min_lines: 30
    - path: "src/components/ExtrusionTool.tsx"
      provides: "Push-pull extrusion tool for creating 3D components"
      exports: ["ExtrusionTool"]
  key_links:
    - from: "CeilingPanel.tsx"
      to: "Box geometry"
      via: "args props for width/length/thickness"
      pattern: "Box.*args.*width.*length"
    - from: "LightingCutout.tsx"
      to: "Cylinder geometry"
      via: "radius and height for fixture holes"
      pattern: "Cylinder.*radius.*height"
    - from: "ExtrusionTool.tsx"
      to: "useRef"
      via: "mesh ref for push-pull interactions"
      pattern: "useRef.*mesh"
---

<objective>
Build component library with ceiling panels, lighting cutouts, and push-pull extrusion tool

Purpose: Provide basic 3D building components that can be placed and modified in the design canvas
Output: Reusable React Three Fiber components for ceiling design elements
</objective>

<execution_context>
@src/components/ThreeDCanvas.tsx
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</execution_context>

<context>
@src/components/ThreeDCanvas.tsx
</context>

<tasks>

<task type="auto">
  <name>Create CeilingPanel component with basic geometry</name>
  <files>src/components/CeilingPanel.tsx</files>
  <action>Create React component using Box geometry for ceiling panels, accept props for width/length/height in mm, convert to world units (/1000), add basic Material with standard acoustic tiles appearance (white diffuse), include position rotation props for placement</action>
  <verify>Panel renders as Box mesh in 3D space, dimensions match input props converted to meters, material displays correctly</verify>
  <done>CeilingPanel component creates rectangular panel geometry with correct scaling and material properties</done>
</task>

<task type="auto">
  <name>Create LightingCutout component for fixture holes</name>
  <files>src/components/LightingCutout.tsx</files>
  <action>Create React component using Cylinder geometry for circular lighting fixtures, accept radius (e.g. 150mm) and height/depth props, position relative to parent panel for subtraction, add visible wireframe material to show cutout position</action>
  <verify>Cylinder mesh renders with specified radius and depth, positions correctly relative to ceiling panels</verify>
  <done>LightingCutout component generates circular void geometry for lighting fixture placements</done>
</task>

<task type="auto">
  <name>Implement ExtrusionTool for push-pull interactions</name>
  <files>src/components/ExtrusionTool.tsx</files>
  <action>Create reusable hook/component using useRef for mesh selection, implement mouse drag events to modify geometry height, add visual feedback during extrusion (color change), handle both platform and mobile touch events for cross-platform extrusion</action>
  <verify>Mouse drag modifies selected mesh height in real-time, extrusion handles both increase and decrease operations</verify>
  <done>ExtrusionTool enables push-pull 3D modeling with interactive height modification control</done>
</task>

</tasks>

<verification>
Import CeilingPanel into Scene component, verify it renders multiple panels with different dimensions, add LightingCutout next to panel, confirm ExtrusionTool can select and modify panel heights
</verification>

<success_criteria>
Component library provides basic ceiling panel geometry, lighting cutouts for fixtures, and push-pull extrusion tool allowing users to create and modify 3D building components interactively
</success_criteria>

<output>
After completion, create .planning/phases/02-architecture/02-04-SUMMARY.md
</output></content>
<parameter name="filePath">.planning/phases/02-architecture/02-04-PLAN.md