---
phase: 06-bim-workbench
plan: 03
type: execute
wave: 1
depends_on: [06-01, 06-02]
files_modified:
  - tailwind.config.js
  - app/globals.css
  - components/ui/Button.tsx
  - components/ui/Input.tsx
  - components/ui/Select.tsx
  - components/ui/Dialog.tsx
  - components/ui/Tooltip.tsx
  - components/ui/Tabs.tsx
  - components/ui/Card.tsx
  - components/ui/Toolbar.tsx
  - components/ui/Separator.tsx
  - components/bim/ToolButton.tsx
  - components/bim/PropertyInput.tsx
  - components/bim/LayerListItem.tsx
  - components/bim/ObjectTreeItem.tsx
  - components/index.ts
autonomous: true

must_haves:
  truths:
    - "Savage Cabinetry colors render correctly in all UI components"
    - "All base components have consistent sizing and spacing"
    - "BIM-specific components display properly with icons and labels"
    - "Radix UI primitives are correctly styled"
    - "TypeScript types are exported for all components"
  artifacts:
    - path: "tailwind.config.js"
      provides: "Custom color palette configuration"
      contains: "extend.colors with savage-* keys"
    - path: "components/ui/Button.tsx"
      provides: "Reusable button with variants"
      exports: ["Button", "buttonVariants"]
    - path: "components/ui/Input.tsx"
      provides: "Styled text input with label"
      exports: ["Input"]
    - path: "components/ui/Select.tsx"
      provides: "Dropdown selection component"
      exports: ["Select", "SelectTrigger", "SelectValue", "SelectContent", "SelectItem"]
    - path: "components/ui/Dialog.tsx"
      provides: "Modal dialog using Radix"
      exports: ["Dialog", "DialogTrigger", "DialogContent", "DialogHeader", "DialogTitle", "DialogDescription", "DialogFooter"]
    - path: "components/ui/Tooltip.tsx"
      provides: "Hover tooltip using Radix"
      exports: ["Tooltip", "TooltipTrigger", "TooltipContent", "TooltipProvider"]
    - path: "components/ui/Tabs.tsx"
      provides: "Tab interface using Radix"
      exports: ["Tabs", "TabsList", "TabsTrigger", "TabsContent"]
    - path: "components/ui/Card.tsx"
      provides: "Panel/card container"
      exports: ["Card", "CardHeader", "CardTitle", "CardContent", "CardFooter"]
    - path: "components/ui/Toolbar.tsx"
      provides: "Horizontal toolbar container"
      exports: ["Toolbar"]
    - path: "components/ui/Separator.tsx"
      provides: "Visual divider"
      exports: ["Separator"]
    - path: "components/bim/ToolButton.tsx"
      provides: "BIM toolbar button with icon"
      exports: ["ToolButton"]
    - path: "components/bim/PropertyInput.tsx"
      provides: "Labeled property field"
      exports: ["PropertyInput"]
    - path: "components/bim/LayerListItem.tsx"
      provides: "Layer visibility toggle row"
      exports: ["LayerListItem"]
    - path: "components/bim/ObjectTreeItem.tsx"
      provides: "Hierarchical object tree node"
      exports: ["ObjectTreeItem"]
    - path: "components/index.ts"
      provides: "Component barrel exports"
      exports: ["All UI components", "All BIM components"]
  key_links:
    - from: "tailwind.config.js"
      to: "all UI components"
      via: "Tailwind classes bg-savage-*, text-savage-*"
      pattern: "className=.*savage-"
    - from: "components/bim/*.tsx"
      to: "components/ui/*.tsx"
      via: "Import statements"
      pattern: "from ['\"]@/components/ui/"
---

## Objective
Create the foundational UI component library for the BIM Workbench with Savage Cabinetry branding. This plan establishes the visual design system (colors, typography, spacing) and provides the reusable building blocks that all tools will use. The components must integrate Radix UI primitives for accessibility and follow the established BIMLayout.jsx Tailwind class conventions.

Purpose: Without these base components, we cannot build any of the 18 tools planned for Phase 6. This is the UI infrastructure that everything else depends on.

Output: A complete component library with 14+ components, custom Savage Cabinetry theme colors, and TypeScript exports ready for tool implementation.

## Execution Context
@/home/tomas/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/tomas/.config/opencode/get-shit-done/templates/summary.md

## Context
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@app/bim/BIMLayout.jsx
@tailwind.config.js

BIMLayout.jsx uses Tailwind classes like `bg-savage-dark`, `text-savage-primary`, `border-savage-surface`. These custom colors do not exist in the default Tailwind palette and must be defined in tailwind.config.js. The color scheme is designed for a dark-themed CAD workspace with high contrast and professional appearance.

The component architecture uses Radix UI primitives (via `@radix-ui/react-*` packages) for complex interactions like dialogs, tooltips, and tabs. These primitives provide accessibility out of the box and are styled with Tailwind classes to match the Savage Cabinetry brand.

Component directory structure:
- `components/ui/` - Generic, reusable UI primitives
- `components/bim/` - BIM-specific components that compose UI primitives
- `components/index.ts` - Barrel exports for clean imports

## Tasks

<task type="auto">
  <name>Task 1: Configure Savage Cabinetry Theme in Tailwind</name>
  <files>tailwind.config.js, app/globals.css</files>
  <action>
    Update tailwind.config.js to extend the theme with Savage Cabinetry colors. Add under `theme.extend.colors`:
    - savage-primary: '#1E40AF' (Royal blue - primary brand color)
    - savage-accent: '#F59E0B' (Amber - accent/highlight)
    - savage-dark: '#0F172A' (Slate 900 - main background)
    - savage-surface: '#1E293B' (Slate 800 - card/panel backgrounds)
    - savage-text: '#F8FAFC' (Slate 50 - primary text)
    - savage-text-muted: '#94A3B8' (Slate 400 - secondary text)
    - savage-success: '#10B981' (Emerald - success states)
    - savage-danger: '#EF4444' (Red - error/danger states)
    
    Also add fontFamily extension if not present:
    - sans: ['Inter', 'system-ui', 'sans-serif']
    - mono: ['JetBrains Mono', 'monospace']
    
    Update app/globals.css to ensure base styles use the dark theme (bg-savage-dark, text-savage-text) and remove any conflicting color definitions. Ensure the `dark` class strategy is set up properly on the html element.
  </action>
  <verify>Run `npm run build` to verify Tailwind compiles without errors. Check that Tailwind IntelliSense recognizes the savage-* color classes.</verify>
  <done>Tailwind config contains all 8 Savage Cabinetry colors, build passes, and bg-savage-dark/text-savage-text classes are available.</done>
</task>

<task type="auto">
  <name>Task 2: Create Base UI Components (Part 1)</name>
  <files>components/ui/Button.tsx, components/ui/Input.tsx, components/ui/Select.tsx, components/ui/Separator.tsx</files>
  <action>
    Create components/ui/Button.tsx:
    - Use `cva` (class-variance-authority) for variant management
    - Variants: default (primary), secondary, outline, ghost, danger
    - Sizes: sm, md, lg
    - Props: extends ButtonHTMLAttributes, adds `variant`, `size`, `asChild` (for polymorphism)
    - Styling: bg-savage-primary for default, bg-savage-surface for secondary, border-savage-surface for outline
    - Include focus-visible states with savage-accent ring
    
    Create components/ui/Input.tsx:
    - Wraps native input with label support
    - Props: label?: string, error?: string, icon?: ReactNode
    - Styling: bg-savage-surface border-savage-surface focus:border-savage-primary text-savage-text
    - Include placeholder styling with savage-text-muted
    
    Create components/ui/Select.tsx:
    - Uses Radix Select primitive (@radix-ui/react-select)
    - Components: Select, SelectTrigger, SelectValue, SelectContent, SelectItem
    - Styling: Trigger uses bg-savage-surface, Content uses bg-savage-surface with border-savage-surface
    - Include scroll buttons for long lists
    
    Create components/ui/Separator.tsx:
    - Uses Radix Separator primitive (@radix-ui/react-separator)
    - Supports horizontal and vertical orientations
    - Styling: bg-savage-surface (opacity 50%), thickness 1px
  </action>
  <verify>Run TypeScript compiler: `npx tsc --noEmit` to ensure no type errors. Import each component in a test file and verify they render without runtime errors.</verify>
  <done>All 4 components exist, compile without errors, and use savage-* color classes correctly.</done>
</task>

<task type="auto">
  <name>Task 3: Create Base UI Components (Part 2)</name>
  <files>components/ui/Dialog.tsx, components/ui/Tooltip.tsx, components/ui/Tabs.tsx, components/ui/Card.tsx, components/ui/Toolbar.tsx</files>
  <action>
    Create components/ui/Dialog.tsx:
    - Uses Radix Dialog primitive (@radix-ui/react-dialog)
    - Export: Dialog, DialogTrigger, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter, DialogClose
    - Styling: Overlay uses bg-savage-dark with 80% opacity, Content uses bg-savage-surface
    - Include animations for open/close using Tailwind transitions
    - Close button in top-right using X icon from lucide-react
    
    Create components/ui/Tooltip.tsx:
    - Uses Radix Tooltip primitive (@radix-ui/react-tooltip)
    - Export: TooltipProvider, Tooltip, TooltipTrigger, TooltipContent
    - Styling: Content uses bg-savage-dark border-savage-surface text-savage-text
    - Delay: 150ms, duration: 200ms
    - Side: top by default, offset 4px
    
    Create components/ui/Tabs.tsx:
    - Uses Radix Tabs primitive (@radix-ui/react-tabs)
    - Export: Tabs, TabsList, TabsTrigger, TabsContent
    - Styling: List uses bg-savage-surface/50, Trigger uses data-[state=active]:bg-savage-primary
    - Trigger variants: default (solid), underline
    
    Create components/ui/Card.tsx:
    - Simple container with header, title, content, footer sections
    - Props: className, children
    - Styling: bg-savage-surface border border-savage-surface rounded-lg shadow-sm
    - Subcomponents: CardHeader, CardTitle, CardContent, CardFooter
    
    Create components/ui/Toolbar.tsx:
    - Horizontal container for tool buttons
    - Props: children, className
    - Styling: flex flex-row items-center gap-1 p-1 bg-savage-surface border-b border-savage-surface
    - Supports dividers between button groups using Separator
  </action>
  <verify>Create a test page that renders each component. Verify Dialog opens/closes, Tooltip appears on hover, Tabs switch content, Card displays properly, Toolbar aligns buttons horizontally.</verify>
  <done>All 5 components exist with proper Radix integration, correct styling, and TypeScript types.</done>
</task>

<task type="auto">
  <name>Task 4: Create BIM-Specific Components</name>
  <files>components/bim/ToolButton.tsx, components/bim/PropertyInput.tsx, components/bim/LayerListItem.tsx, components/bim/ObjectTreeItem.tsx, components/bim/index.ts</files>
  <action>
    Create components/bim/ToolButton.tsx:
    - Toolbar button specifically for tools (draw, measure, etc.)
    - Props: icon: LucideIcon, label: string, active?: boolean, onClick?: () => void, tooltip?: string
    - Uses Tooltip component from ui/
    - Styling: Square aspect ratio, bg-savage-surface when inactive, bg-savage-primary when active
    - Icon size: 20px, button size: 36px
    - Keyboard shortcut display in tooltip if provided
    
    Create components/bim/PropertyInput.tsx:
    - Input field for object properties (width, height, material, etc.)
    - Props: label: string, value: string | number, type?: 'text' | 'number' | 'select', options?: string[], onChange: (value) => void
    - Uses Input and Select components from ui/
    - Styling: Compact layout with label above input, value text in savage-text
    - Include units display (mm, sqm, etc.) if provided
    
    Create components/bim/LayerListItem.tsx:
    - Row for layer list with visibility toggle
    - Props: name: string, visible: boolean, color?: string, locked?: boolean, onToggle: () => void
    - Icons: Eye/EyeOff for visibility, Lock for locked state
    - Styling: flex row with name, color swatch, toggle buttons, hover:bg-savage-surface/50
    - Color swatch: 16px square with border
    
    Create components/bim/ObjectTreeItem.tsx:
    - Hierarchical tree node for object browser
    - Props: object: {id, name, type, children?, expanded?, visible?}, level: number, onToggle: () => void, onSelect: () => void
    - Icons: Folder/File, ChevronRight/ChevronDown for expand/collapse
    - Indentation: 16px per level
    - Styling: hover:bg-savage-surface/50, selected:bg-savage-primary/20
    - Support for expandable/collapsible children
    
    Create components/bim/index.ts:
    - Barrel exports for all BIM components
    - Export: ToolButton, PropertyInput, LayerListItem, ObjectTreeItem
  </action>
  <verify>Create a BIM test layout that uses all BIM components together. Verify ToolButton shows tooltip, PropertyInput handles different types, LayerListItem toggles visibility, ObjectTreeItem expands/collapses.</verify>
  <done>All 4 BIM components exist with proper composition of UI primitives, correct TypeScript interfaces, and BIM-specific functionality.</done>
</task>

<task type="auto">
  <name>Task 5: Create Component Index and Verify Integration</name>
  <files>components/index.ts</files>
  <action>
    Create components/index.ts:
    - Re-export all UI components from components/ui/
    - Re-export all BIM components from components/bim/
    - Group exports logically with comments:
      // UI Primitives
      export * from './ui/Button'
      export * from './ui/Input'
      ...
      // BIM Components
      export * from './bim/ToolButton'
      export * from './bim/PropertyInput'
      ...
    
    Create a visual test page at app/bim/test-components/page.tsx:
    - Import and display all components in organized sections
    - Section: Colors (display all savage-* colors)
    - Section: Buttons (all variants and sizes)
    - Section: Inputs (text, number, with labels, with errors)
    - Section: Select (dropdown example)
    - Section: Dialog (trigger button + dialog content)
    - Section: Tooltip (hover examples)
    - Section: Tabs (tabbed interface)
    - Section: Card (card with header/content/footer)
    - Section: Toolbar (row of ToolButtons)
    - Section: BIM Components (PropertyInput, LayerListItem, ObjectTreeItem examples)
    
    Ensure all components use consistent spacing (gap-2, gap-4) and the page demonstrates proper usage patterns.
  </action>
  <verify>Run `npm run build` to ensure all components compile. Navigate to /bim/test-components and visually verify all components render correctly with proper styling and interactions.</verify>
  <done>Component index exports all components, test page renders without errors, all components display with correct Savage Cabinetry styling.</done>
</task>

## Verification
- [ ] All 8 Savage Cabinetry colors defined in tailwind.config.js
- [ ] TypeScript compilation passes without errors
- [ ] Build completes successfully
- [ ] Test page renders at /bim/test-components
- [ ] All Radix components (Dialog, Tooltip, Tabs, Select) function correctly
- [ ] BIM components compose properly with UI primitives
- [ ] ToolButton displays tooltip on hover
- [ ] PropertyInput handles text, number, and select types
- [ ] LayerListItem toggles visibility state
- [ ] ObjectTreeItem expands/collapses hierarchical data
- [ ] Component index exports all components for clean imports
- [ ] All components use savage-* color classes consistently
- [ ] No console errors or warnings

## Success Criteria
**Completion:** 100% when all components exist, build passes, and test page renders correctly.

**Observable Truths:**
- Savage Cabinetry colors render correctly (verify visually on test page)
- Components are reusable across different tools (import from single index)
- Radix primitives provide proper accessibility (test with keyboard navigation)
- BIM components provide domain-specific functionality (tools, properties, layers, objects)

**Measured Criteria:**
- 14+ components created (8 UI + 4 BIM + index + test page)
- Zero TypeScript errors
- Zero build errors
- Test page loads in < 2 seconds

## Output
After completion, create `.planning/phases/06-bim-workbench/06-03-SUMMARY.md` with:
- Summary of created components
- Usage examples for key components
- Notes on styling patterns established
- Next phase dependencies (which tools depend on these components)
